import{j as e}from"./jsx-runtime-u17CrQMm.js";import{u as ye,d as fe,e as M,a as y,g as _e,s as ve,A as h,i as xe,j as je,k as Ce,h as A,Q as Ie,b as Ne,H as D}from"./index-BXY9Cher.js";import{r as g}from"./iframe-CPHJn06c.js";import{E as Me}from"./index-CxM2BMeA.js";import{P as q}from"./index-ykZGv8WS.js";import{B as G}from"./index-BKtDPDeF.js";import{u as S}from"./useErrorModal-Cab9BzkM.js";import{G as Se}from"./index-Dr7SzFTB.js";import{M as be}from"./index-DTlO3yFP.js";import{G as Ee}from"./index-B4vEZxWK.js";import{G as ke}from"./index-qmO8iuMG.js";import{G as we}from"./index-FleF9bOc.js";import"./index-BBN6NKCS.js";import"./index-D6oGD9Zi.js";import{L as Ge}from"./index-B_6ALSKX.js";import"./index-82o3Ei6c.js";import"./index-DGt8TxmG.js";import"./index-ewbuceuk.js";import"./index-C83HJg6k.js";import"./index-DSzJp1Cl.js";import{u as Ue,M as qe}from"./chunk-JMJ3UQ3L-BajG3WJm.js";import{c as $}from"./createLucideIcon-HukRUT_g.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CBACer3n.js";import"./Combination-CT6mbxoi.js";import"./index-CTzzCg8u.js";import"./index-CHYCHUyr.js";import"./x-Dmh88zpU.js";import"./mail-D-FkvEzR.js";import"./check-Bys7S9O_.js";import"./user-plus-KEE1WUpK.js";import"./search-CKr5YeF-.js";import"./index-Bfeyzlza.js";const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],We=$("circle-user",Te);const Pe=[["path",{d:"M13.22 2.416a2 2 0 0 0-2.511.057l-7 5.999A2 2 0 0 0 3 10v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7.354",key:"5phn05"}],["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"M18 3v6",key:"x1uolp"}]],Re=$("house-plus",Pe),O=g.createContext(null);function Q({value:t,children:o}){return e.jsx(O.Provider,{value:t,children:o})}function Ae(){const t=g.useContext(O);if(!t)throw new Error("SessionUserProvider ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚èªè¨¼æ¸ˆã¿ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ãƒ©ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚");return t}Q.__docgenInfo={description:"",methods:[],displayName:"SessionUserProvider",props:{value:{required:!0,tsType:{name:"AppSessionUser"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const De="_page_e0z94_1",$e="_shell_e0z94_14",Oe="_footerNote_e0z94_21",w={page:De,shell:$e,footerNote:Oe},f=["groups"],Qe=()=>ye({queryKey:f,queryFn:fe}),He=()=>{const t=M();return y({mutationFn:o=>_e({name:o}),onSuccess:async()=>{await t.invalidateQueries({queryKey:f})}})},ze=()=>{const[t,o]=g.useState(""),{showError:i,closeError:n,getModalMessage:a}=S(),r=y({mutationFn:({groupId:l,email:p})=>ve({groupId:l,email:p}),onError:l=>{if(l instanceof h&&l.status===422){o(l.message),n();return}const p=l instanceof h?l.status:void 0,b=l instanceof Error&&l.message?l.message:"æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ";o(""),i({title:"æ¤œç´¢ã‚¨ãƒ©ãƒ¼",message:p?a(p):b})},onSuccess:()=>{o(""),n()}}),c=()=>{o("")};return{...r,errorMessage:t,clearErrorMessage:c,resetSearchResult:()=>{r.reset(),c()}}},Le=()=>{const t=M(),{showError:o,closeError:i,getModalMessage:n}=S();return y({mutationFn:({groupId:a,userId:r})=>xe({groupId:a,user_id:r}),onSuccess:async()=>{await t.invalidateQueries({queryKey:f}),i()},onError:a=>{const r=a instanceof h?a.status:void 0,c=a instanceof Error&&a.message?a.message:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‹›å¾…ã«å¤±æ•—ã—ã¾ã—ãŸ";o({title:"æ‹›å¾…ã‚¨ãƒ©ãƒ¼",message:r?n(r):c})}})},Be=t=>{const o=M(),{showError:i,closeError:n,getModalMessage:a}=S();return y({mutationFn:({groupId:r})=>je({groupId:r}),onSuccess:async(r,c)=>{await o.invalidateQueries({queryKey:f}),n(),t?.onSuccess?.(c.groupId)},onError:r=>{const c=r instanceof h?r.status:void 0,_=r instanceof Error&&r.message?r.message:"æ‹›å¾…ã®æ‰¿èªã«å¤±æ•—ã—ã¾ã—ãŸ";i({title:"æ‹›å¾…æ‰¿èªã‚¨ãƒ©ãƒ¼",message:c?a(c):_})}})},Fe=()=>{const t=M(),{showError:o,closeError:i,getModalMessage:n}=S();return y({mutationFn:({groupId:a})=>Ce({groupId:a}),onSuccess:async()=>{await t.invalidateQueries({queryKey:f}),i()},onError:a=>{const r=a instanceof h?a.status:void 0,c=a instanceof Error&&a.message?a.message:"æ‹›å¾…ã®æ‹’å¦ã«å¤±æ•—ã—ã¾ã—ãŸ";o({title:"æ‹›å¾…æ‹’å¦ã‚¨ãƒ©ãƒ¼",message:r?n(r):c})}})},Ke="_message_1lkur_1",Ve={message:Ke};function H({open:t,groupName:o,onOpenChange:i,onConfirm:n,onCancel:a,isSubmitting:r=!1}){return e.jsx(be,{open:t,onOpenChange:i,title:"æ‹›å¾…ã‚’æ‹’å¦ã—ã¾ã™",footer:e.jsxs(e.Fragment,{children:[e.jsx(G,{type:"button",variant:"outline",size:"md",radius:"lg",onClick:a,disabled:r,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(G,{type:"button",variant:"primary",size:"md",radius:"lg",onClick:n,disabled:r,children:"æ‹’å¦ã™ã‚‹"})]}),children:e.jsxs("p",{className:Ve.message,children:["ã€Œ",o??"ã‚°ãƒ«ãƒ¼ãƒ—","ã€ã¸ã®æ‹›å¾…ã‚’æœ¬å½“ã«æ‹’å¦ã—ã¾ã™ã‹ï¼Ÿ"]})})}H.__docgenInfo={description:"",methods:[],displayName:"GroupDenyModal",props:{open:{required:!0,tsType:{name:"boolean"},description:""},groupName:{required:!1,tsType:{name:"string"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},onConfirm:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isSubmitting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Ye="_groupsContent_b1rrt_1",Je="_sectionHeader_b1rrt_7",Xe="_emptyCard_b1rrt_50",Ze="_emptyEmoji_b1rrt_60",es="_emptyTitle_b1rrt_65",ss="_emptyDescription_b1rrt_72",ts="_helperText_b1rrt_79",rs="_list_b1rrt_86",as="_loadingWrapper_b1rrt_91",u={groupsContent:Ye,sectionHeader:Je,emptyCard:Xe,emptyEmoji:Ze,emptyTitle:es,emptyDescription:ss,helperText:ts,list:rs,loadingWrapper:as};function z(){const t=Ue(),[o,i]=g.useState(!1),[n,a]=g.useState(null),[r,c]=g.useState(null),{data:_,isLoading:l,isError:p}=Qe(),{mutateAsync:b,isPending:K}=He(),{mutateAsync:V,isPending:Y}=Le(),{mutateAsync:J,isPending:X}=Be({onSuccess:s=>{const m=E.find(he=>he.id===s)?.name??s;t(`/groups/${s}`,{state:{groupName:m}})}}),{mutateAsync:Z,isPending:T}=Fe(),{mutateAsync:ee,isPending:se,data:te,errorMessage:re,clearErrorMessage:ae,resetSearchResult:W}=ze(),oe=async s=>{try{await b(s),i(!1)}catch(m){console.error(m)}},E=_?.groups??[],P=E.filter(s=>s.is_invited),R=E.filter(s=>!s.is_invited),ne=R.length>0,ie=(s,m)=>{a({id:s,name:m}),W()},ce=()=>{a(null),W()},me=(s,m)=>{c({id:s,name:m})},k=()=>{c(null)},le=async s=>{if(n)try{await ee({groupId:n.id,email:s})}catch(m){console.error(m)}},ue=async s=>{if(n)try{await V({groupId:n.id,userId:s})}catch(m){console.error(m)}},de=async s=>{try{await J({groupId:s})}catch(m){console.error(m)}},pe=async()=>{if(r)try{await Z({groupId:r.id}),k()}catch(s){console.error(s)}},ge=()=>l?e.jsx("div",{className:u.loadingWrapper,children:e.jsx(Ge,{size:"md",ariaLabel:"ã‚°ãƒ«ãƒ¼ãƒ—ã‚’èª­ã¿è¾¼ã¿ä¸­"})}):p?e.jsx("p",{className:u.helperText,children:"ã‚°ãƒ«ãƒ¼ãƒ—ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ"}):!ne&&P.length===0?e.jsxs("div",{className:u.emptyCard,children:[e.jsx("div",{className:u.emptyEmoji,"aria-hidden":"true",children:"ðŸ "}),e.jsx("p",{className:u.emptyTitle,children:"ã¾ã ã‚°ãƒ«ãƒ¼ãƒ—ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsxs("p",{className:u.emptyDescription,children:["å®¶æ—ã‚„å‹äººã¨ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œã£ã¦",e.jsx("br",{}),"å®¶äº‹ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ï¼"]})]}):e.jsxs("div",{className:u.list,children:[P.map(s=>e.jsx(ke,{groupName:s.name,inviterName:void 0,disabled:X||T,onAccept:()=>{de(s.id)},onDecline:()=>{me(s.id,s.name)}},`invite-${s.id}`)),R.map(s=>e.jsx(Ee,{name:s.name,memberCount:s.member_count,invitedCount:s.invited_count,onInviteClick:()=>{ie(s.id,s.name)},onOpenClick:()=>{t(`/groups/${s.id}`,{state:{groupName:s.name}})}},s.id))]});return e.jsxs(q,{children:[e.jsxs("section",{className:u.groupsContent,"aria-labelledby":"groups-heading",children:[e.jsxs("div",{className:u.sectionHeader,children:[e.jsx("h2",{id:"groups-heading",children:"ã‚ãªãŸã®ã‚°ãƒ«ãƒ¼ãƒ—"}),e.jsx(G,{variant:"primary",radius:"pill",size:"md",fullWidth:!0,icon:e.jsx(Re,{"aria-hidden":!0,size:18}),onClick:()=>{i(!0)},children:"æ–°è¦ä½œæˆ"})]}),ge(),e.jsx(Se,{open:o,onOpenChange:i,onSubmit:s=>{oe(s)},isSubmitting:K})]}),e.jsx(we,{open:!!n,onOpenChange:s=>{s||ce()},groupName:n?.name??"ã‚°ãƒ«ãƒ¼ãƒ—å",onSearch:s=>{le(s)},isSearching:se,isInviting:Y,searchResults:te?.users??[],searchError:re,onClearSearchError:ae,onInvite:s=>{ue(s.id)}}),e.jsx(H,{open:!!r,groupName:r?.name,onOpenChange:s=>{s||k()},onCancel:k,onConfirm:()=>{pe()},isSubmitting:T})]})}z.__docgenInfo={description:"",methods:[],displayName:"GroupsSection"};const os="_profileContent_x0tmm_1",ns="_avatar_x0tmm_7",is="_avatarIcon_x0tmm_18",cs="_avatarImage_x0tmm_25",ms="_profileText_x0tmm_32",ls="_welcome_x0tmm_38",us="_userName_x0tmm_44",d={profileContent:os,avatar:ns,avatarIcon:is,avatarImage:cs,profileText:ms,welcome:ls,userName:us};function L({user:t}){const o=t.name??"ãƒ¦ãƒ¼ã‚¶ãƒ¼";return e.jsx(q,{children:e.jsxs("div",{className:d.profileContent,children:[e.jsx("div",{className:d.avatar,children:t.image?e.jsx("img",{src:t.image,alt:`${o}ã®ã‚¢ã‚¤ã‚³ãƒ³`,className:d.avatarImage,referrerPolicy:"no-referrer"}):e.jsx(We,{"aria-hidden":!0,className:d.avatarIcon})}),e.jsxs("div",{className:d.profileText,children:[e.jsx("p",{className:d.welcome,children:"ã‚ˆã†ã“ãï¼"}),e.jsxs("p",{className:d.userName,children:[o," ã•ã‚“"]})]})]})})}L.__docgenInfo={description:"",methods:[],displayName:"ProfileSection",props:{user:{required:!0,tsType:{name:"AppSessionUser"},description:""}}};const ds="_heroContent_c7dgf_1",ps="_heroBadge_c7dgf_7",gs="_heroEyebrow_c7dgf_18",hs="_heroTitle_c7dgf_25",v={heroContent:ds,heroBadge:ps,heroEyebrow:gs,heroTitle:hs};function B(){return e.jsx(q,{children:e.jsxs("section",{className:v.heroContent,"aria-labelledby":"hero-heading",children:[e.jsx("div",{className:v.heroBadge,"aria-hidden":"true",children:e.jsx("img",{src:"https://kaji-ai.s3.ap-northeast-1.amazonaws.com/favicon.svg",alt:"ã‚¢ãƒ—ãƒªã®ã‚¢ã‚¤ã‚³ãƒ³"})}),e.jsxs("div",{children:[e.jsx("h1",{id:"hero-heading",className:v.heroTitle,children:"ã‚«ã‚¸ã‚¢ã‚¤"}),e.jsx("p",{className:v.heroEyebrow,children:"ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"})]})]})})}B.__docgenInfo={description:"",methods:[],displayName:"HeroSection"};function U(){const t=Ae();return e.jsx("div",{className:w.page,children:e.jsxs("main",{className:w.shell,children:[e.jsx(B,{}),e.jsx(L,{user:t}),e.jsx(z,{}),e.jsx("p",{className:w.footerNote,children:"ã•ã‚ã€ä»Šé€±ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼ âœ¨"})]})})}U.__docgenInfo={description:"",methods:[],displayName:"UserPage"};const ys={groups:[{id:"group-1",name:"æ°¸äº•å®¶",image:null,member_count:1,invited_count:0,is_invited:!1},{id:"group-2",name:"æµ…äº•å®¶",image:null,member_count:3,invited_count:1,is_invited:!1},{id:"group-3",name:"ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹æ¡œ",image:"https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?auto=format&fit=crop&w=200&h=200&q=80",member_count:5,invited_count:2,is_invited:!1}]},Zs={component:U,parameters:{layout:"fullscreen",msw:{handlers:[A.get(/\/api\/groups$/,()=>D.json(ys))]}},argTypes:{user:{control:!1}},decorators:[(t,o)=>{const i=new Ie({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return e.jsx(qe,{initialEntries:["/users/mock-user"],children:e.jsx(Q,{value:o.args.user,children:e.jsx(Ne,{client:i,children:e.jsx(Me,{children:e.jsx(t,{})})})})})}],render:()=>e.jsx(U,{})},F={id:"mock-user",name:"å±±ç”° èŠ±å­",email:"hanako@example.com",image:null},fs={id:"mock-user-image",name:"å±±ç”° èŠ±å­",email:"hanako@example.com",image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=facearea&w=200&h=200&q=80"},_s={id:"mock-user-large-image",name:"å±±ç”° å¤§è¼”",email:"daisuke@example.com",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&w=1200&h=1200&q=80"},vs={id:"mock-user-small-image",name:"å±±ç”° å°æ˜¥",email:"koharu@example.com",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&w=60&h=60&q=80"},x={args:{user:F}},j={args:{user:fs}},C={args:{user:_s}},I={args:{user:vs}},N={args:{user:F},parameters:{msw:{handlers:[A.get(/\/api\/groups$/,()=>D.json({groups:[]}))]}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithoutImage
  }
}`,...x.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithImage
  }
}`,...j.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithLargeImage
  }
}`,...C.parameters?.docs?.source}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithSmallImage
  }
}`,...I.parameters?.docs?.source}}};N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithoutImage
  },
  parameters: {
    msw: {
      handlers: [http.get(/\\/api\\/groups$/, () => HttpResponse.json({
        groups: []
      }))]
    }
  }
}`,...N.parameters?.docs?.source}}};const et=["WithoutImage","WithImage","WithLargeImage","WithSmallImage","NoGroups"];export{N as NoGroups,j as WithImage,C as WithLargeImage,I as WithSmallImage,x as WithoutImage,et as __namedExportsOrder,Zs as default};
