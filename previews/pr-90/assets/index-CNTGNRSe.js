import{j as e}from"./jsx-runtime-u17CrQMm.js";import{g as N}from"./chores-Hta7grnG.js";import{U as m}from"./index-D9Lnau_G.js";import{H as y}from"./index-C7Fgn_lq.js";import{C as j}from"./chevron-down-JT4wqBqi.js";import{L as I}from"./index-CG3JnhLL.js";import{u as v}from"./QueryClientProvider-oD_t8xT0.js";import{u as M,b as T,A as B}from"./index-JBafH4ca.js";import{u as L}from"./useErrorModal-DEp-Fg2q.js";import{c as q}from"./createLucideIcon-C_imvSua.js";const C=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M14.8 7.5a1.84 1.84 0 0 0-2.6 0l-.2.3-.3-.3a1.84 1.84 0 1 0-2.4 2.8L12 13l2.7-2.7c.9-.9.8-2.1.1-2.8",key:"1blaws"}]],E=q("message-square-heart",C),be=a=>["groups",a,"chores"],S=(a,n)=>["groups",a,"beatings",n],k="_gratitudeList_13brh_1",R="_gratitudeAccordion_13brh_7",U="_gratitudeSummaryIcon_13brh_13",H="_gratitudeSummary_13brh_13",w="_gratitudeSummaryText_13brh_38",z="_gratitudeExtraList_13brh_43",A="_gratitudeItem_13brh_49",V="_gratitudeHeader_13brh_60",D="_gratitudeBadge_13brh_66",G="_gratitudeName_13brh_84",P="_gratitudeMain_13brh_91",Q="_gratitudeDescribe_13brh_98",r={gratitudeList:k,gratitudeAccordion:R,gratitudeSummaryIcon:U,gratitudeSummary:H,gratitudeSummaryText:w,gratitudeExtraList:z,gratitudeItem:A,gratitudeHeader:V,gratitudeBadge:D,gratitudeName:G,gratitudeMain:P,gratitudeDescribe:Q};function l({message:a}){return e.jsxs("div",{className:r.gratitudeItem,children:[e.jsxs("div",{className:r.gratitudeHeader,children:[e.jsx(m,{name:a.userName,imageUrl:a.userImageUrl,size:"sm",tone:"orange",badge:e.jsx("span",{className:r.gratitudeBadge,"aria-hidden":!0,children:e.jsx(y,{size:"sm"})})}),e.jsx("p",{className:r.gratitudeName,children:a.userName})]}),e.jsx("p",{className:r.gratitudeMain,children:a.mainMessage}),a.describeMessage?e.jsx("p",{className:r.gratitudeDescribe,children:a.describeMessage}):null]})}function g({messages:a=[]}){if(a.length===0)return null;const n=a[0],c=a.slice(1);return e.jsxs("div",{className:r.gratitudeList,"aria-label":"感謝メッセージ",children:[e.jsx(l,{message:n}),c.length>0?e.jsxs("details",{className:r.gratitudeAccordion,children:[e.jsxs("summary",{className:r.gratitudeSummary,children:[e.jsx("span",{className:r.gratitudeSummaryIcon,"aria-hidden":!0,children:e.jsx(j,{size:16})}),e.jsxs("span",{className:r.gratitudeSummaryText,children:["他",c.length,"件の感謝を見る"]})]}),e.jsx("div",{className:r.gratitudeExtraList,children:c.map(o=>e.jsx(l,{message:o},o.id))})]}):null]})}g.__docgenInfo={description:"",methods:[],displayName:"BeatingMessages",props:{messages:{required:!1,tsType:{name:"unknown"},description:"",defaultValue:{value:"[]",computed:!1}}}};const Y=()=>{const a=v(),{showError:n,closeError:c,getModalMessage:o}=L();return M({mutationFn:({groupId:t,beatingId:i})=>T({groupId:t,beatingId:i}),onSuccess:async(t,i)=>{await a.invalidateQueries({queryKey:S(i.groupId,i.date)}),c()},onError:t=>{const i=t instanceof B?t.status:void 0,d=t instanceof Error&&t.message?t.message:"いいねの送信に失敗しました";n({title:"いいねエラー",message:i?o(i):d})}})},K="_card_8bscx_1",O="_header_8bscx_14",$="_choreIcon_8bscx_20",F="_headerBody_8bscx_31",J="_choreName_8bscx_38",W="_reactions_8bscx_45",X="_reactionItem_8bscx_52",Z="_reactionIcon_8bscx_64",ee="_reactionCount_8bscx_70",ae="_divider_8bscx_75",se="_footer_8bscx_81",re="_user_8bscx_87",te="_userText_8bscx_93",ie="_userName_8bscx_99",ne="_userRole_8bscx_106",s={card:K,header:O,choreIcon:$,headerBody:F,choreName:J,reactions:W,reactionItem:X,reactionIcon:Z,reactionCount:ee,divider:ae,footer:se,user:re,userText:te,userName:ie,userRole:ne};function ce({groupId:a,beatingId:n,date:c,choreIconCode:o,choreName:t,userName:i,userImageUrl:d,likeCount:_=0,likedByMe:h=!1,commentCount:u=0,userRoleLabel:p="討伐者",messages:x=[]}){const{mutate:b,isPending:f}=Y();return e.jsxs("article",{className:s.card,"aria-label":`${i}が${t}を討伐`,children:[e.jsxs("div",{className:s.header,children:[e.jsx("div",{className:s.choreIcon,"aria-hidden":!0,children:N(o)}),e.jsxs("div",{className:s.headerBody,children:[e.jsx("p",{className:s.choreName,children:t}),e.jsxs("div",{className:s.reactions,children:[e.jsx(I,{likedByMe:h,likeCount:_,isLiking:f,onLike:()=>{b({groupId:a,beatingId:n,date:c})}}),e.jsxs("div",{className:s.reactionItem,role:"group","aria-label":"メッセージ",children:[e.jsx("span",{className:s.reactionIcon,"aria-hidden":!0,children:e.jsx(E,{size:20})}),u>0?e.jsx("span",{className:s.reactionCount,children:u}):null]})]})]})]}),e.jsx(g,{messages:x}),e.jsx("div",{className:s.divider,"aria-hidden":!0}),e.jsx("div",{className:s.footer,children:e.jsxs("div",{className:s.user,children:[e.jsx(m,{name:i,imageUrl:d,size:"md",tone:"purple"}),e.jsxs("div",{className:s.userText,children:[e.jsx("p",{className:s.userName,children:i}),e.jsx("p",{className:s.userRole,children:p})]})]})})]})}ce.__docgenInfo={description:"",methods:[],displayName:"BeatingCard",props:{groupId:{required:!0,tsType:{name:"string"},description:""},beatingId:{required:!0,tsType:{name:"number"},description:""},date:{required:!0,tsType:{name:"string"},description:""},choreIconCode:{required:!0,tsType:{name:"unknown"},description:""},choreName:{required:!0,tsType:{name:"string"},description:""},userName:{required:!0,tsType:{name:"string"},description:""},userImageUrl:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},likeCount:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},likedByMe:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},commentCount:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},userRoleLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"討伐者"',computed:!1}},messages:{required:!1,tsType:{name:"unknown"},description:"",defaultValue:{value:"[]",computed:!1}}}};export{ce as B,be as G,S as a};
