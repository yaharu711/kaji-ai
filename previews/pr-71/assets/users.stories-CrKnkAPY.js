import{j as e}from"./jsx-runtime-u17CrQMm.js";import{S as ve,s as _e,b as R,g as xe,n as A,c as f,d as be,e as je,u as Ce,i as Me,j as Se,k as Ie,A as y,l as Ne,m as Ee,o as we,h as D,Q as ke,a as Ge,H as K}from"./index-IW05apZb.js";import{r as l}from"./iframe-RxY2YWXR.js";import{E as Ue}from"./index-BromW0sl.js";import{P as q}from"./index-ykZGv8WS.js";import{B as G}from"./index-BKtDPDeF.js";import{u as I}from"./useErrorModal-BWpK9bip.js";import{G as qe}from"./index-C5SJuxUV.js";import{M as Te}from"./index-bhxIW68C.js";import{G as Oe}from"./index-C_XAMBeZ.js";import{G as Pe}from"./index-L1sf20ea.js";import{G as We}from"./index-OgSVBeJQ.js";import"./index-DMYnpOit.js";import"./index-BxJsdC6_.js";import{L as Re}from"./index-7DzJNIuf.js";import"./index-DGT0Vwen.js";import"./index-uChJF3P9.js";import"./index-Drlq51-k.js";import"./index-CbM9LQZZ.js";import"./index-C880A6Rh.js";import{u as Ae,M as De}from"./chunk-JMJ3UQ3L-BLZImfMX.js";import{c as $}from"./createLucideIcon-D4LxMroP.js";import"./preload-helper-PPVm8Dsz.js";import"./index-BXcfz92j.js";import"./Combination-DocvVSzM.js";import"./index-CFL82XH_.js";import"./index-DXd6dXi_.js";import"./x-0R2MFaLp.js";import"./mail-KL4tUSNM.js";import"./check-CFMZxUuK.js";import"./user-plus-GDDZX-0o.js";import"./search-CrC_1gtg.js";import"./index-D3SYzpj2.js";const Ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],$e=$("circle-user",Ke);const Le=[["path",{d:"M13.22 2.416a2 2 0 0 0-2.511.057l-7 5.999A2 2 0 0 0 3 10v9a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7.354",key:"5phn05"}],["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"M18 3v6",key:"x1uolp"}]],Qe=$("house-plus",Le);var He=class extends ve{#s;#r=void 0;#e;#t;constructor(s,r){super(),this.#s=s,this.setOptions(r),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#s.defaultMutationOptions(s),_e(this.options,r)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),r?.mutationKey&&this.options.mutationKey&&R(r.mutationKey)!==R(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(s){this.#o(),this.#a(s)}getCurrentResult(){return this.#r}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#o(),this.#a()}mutate(s,r){return this.#t=r,this.#e?.removeObserver(this),this.#e=this.#s.getMutationCache().build(this.#s,this.options),this.#e.addObserver(this),this.#e.execute(s)}#o(){const s=this.#e?.state??xe();this.#r={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#a(s){A.batch(()=>{if(this.#t&&this.hasListeners()){const r=this.#r.variables,i=this.#r.context,a={client:this.#s,meta:this.options.meta,mutationKey:this.options.mutationKey};if(s?.type==="success"){try{this.#t.onSuccess?.(s.data,r,i,a)}catch(o){Promise.reject(o)}try{this.#t.onSettled?.(s.data,null,r,i,a)}catch(o){Promise.reject(o)}}else if(s?.type==="error"){try{this.#t.onError?.(s.error,r,i,a)}catch(o){Promise.reject(o)}try{this.#t.onSettled?.(void 0,s.error,r,i,a)}catch(o){Promise.reject(o)}}}this.listeners.forEach(r=>{r(this.#r)})})}};function v(s,r){const i=f(),[a]=l.useState(()=>new He(i,s));l.useEffect(()=>{a.setOptions(s)},[a,s]);const o=l.useSyncExternalStore(l.useCallback(c=>a.subscribe(A.batchCalls(c)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n=l.useCallback((c,h)=>{a.mutate(c,h).catch(be)},[a]);if(o.error&&je(a.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:n,mutateAsync:o.mutate}}const L=l.createContext(null);function Q({value:s,children:r}){return e.jsx(L.Provider,{value:s,children:r})}function ze(){const s=l.useContext(L);if(!s)throw new Error("SessionUserProvider ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚èªè¨¼æ¸ˆã¿ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§ãƒ©ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚");return s}Q.__docgenInfo={description:"",methods:[],displayName:"SessionUserProvider",props:{value:{required:!0,tsType:{name:"AppSessionUser"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Be="_page_e0z94_1",Fe="_shell_e0z94_14",Ve="_footerNote_e0z94_21",k={page:Be,shell:Fe,footerNote:Ve},_=["groups"],Ye=()=>Ce({queryKey:_,queryFn:Me}),Je=()=>{const s=f();return v({mutationFn:r=>Se({name:r}),onSuccess:async()=>{await s.invalidateQueries({queryKey:_})}})},Xe=()=>{const[s,r]=l.useState(""),{showError:i,closeError:a,getModalMessage:o}=I(),n=v({mutationFn:({groupId:u,email:g})=>Ie({groupId:u,email:g}),onError:u=>{if(u instanceof y&&u.status===422){r(u.message),a();return}const g=u instanceof y?u.status:void 0,N=u instanceof Error&&u.message?u.message:"æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ";r(""),i({title:"æ¤œç´¢ã‚¨ãƒ©ãƒ¼",message:g?o(g):N})},onSuccess:()=>{r(""),a()}}),c=()=>{r("")};return{...n,errorMessage:s,clearErrorMessage:c,resetSearchResult:()=>{n.reset(),c()}}},Ze=()=>{const s=f(),{showError:r,closeError:i,getModalMessage:a}=I();return v({mutationFn:({groupId:o,userId:n})=>Ne({groupId:o,user_id:n}),onSuccess:async()=>{await s.invalidateQueries({queryKey:_}),i()},onError:o=>{const n=o instanceof y?o.status:void 0,c=o instanceof Error&&o.message?o.message:"ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‹›å¾…ã«å¤±æ•—ã—ã¾ã—ãŸ";r({title:"æ‹›å¾…ã‚¨ãƒ©ãƒ¼",message:n?a(n):c})}})},es=s=>{const r=f(),{showError:i,closeError:a,getModalMessage:o}=I();return v({mutationFn:({groupId:n})=>Ee({groupId:n}),onSuccess:async(n,c)=>{await r.invalidateQueries({queryKey:_}),a(),s?.onSuccess?.(c.groupId)},onError:n=>{const c=n instanceof y?n.status:void 0,h=n instanceof Error&&n.message?n.message:"æ‹›å¾…ã®æ‰¿èªã«å¤±æ•—ã—ã¾ã—ãŸ";i({title:"æ‹›å¾…æ‰¿èªã‚¨ãƒ©ãƒ¼",message:c?o(c):h})}})},ss=()=>{const s=f(),{showError:r,closeError:i,getModalMessage:a}=I();return v({mutationFn:({groupId:o})=>we({groupId:o}),onSuccess:async()=>{await s.invalidateQueries({queryKey:_}),i()},onError:o=>{const n=o instanceof y?o.status:void 0,c=o instanceof Error&&o.message?o.message:"æ‹›å¾…ã®æ‹’å¦ã«å¤±æ•—ã—ã¾ã—ãŸ";r({title:"æ‹›å¾…æ‹’å¦ã‚¨ãƒ©ãƒ¼",message:n?a(n):c})}})},ts="_message_1lkur_1",rs={message:ts};function H({open:s,groupName:r,onOpenChange:i,onConfirm:a,onCancel:o,isSubmitting:n=!1}){return e.jsx(Te,{open:s,onOpenChange:i,title:"æ‹›å¾…ã‚’æ‹’å¦ã—ã¾ã™",footer:e.jsxs(e.Fragment,{children:[e.jsx(G,{type:"button",variant:"outline",size:"md",radius:"lg",onClick:o,disabled:n,children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"}),e.jsx(G,{type:"button",variant:"primary",size:"md",radius:"lg",onClick:a,disabled:n,children:"æ‹’å¦ã™ã‚‹"})]}),children:e.jsxs("p",{className:rs.message,children:["ã€Œ",r??"ã‚°ãƒ«ãƒ¼ãƒ—","ã€ã¸ã®æ‹›å¾…ã‚’æœ¬å½“ã«æ‹’å¦ã—ã¾ã™ã‹ï¼Ÿ"]})})}H.__docgenInfo={description:"",methods:[],displayName:"GroupDenyModal",props:{open:{required:!0,tsType:{name:"boolean"},description:""},groupName:{required:!1,tsType:{name:"string"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},onConfirm:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isSubmitting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const os="_groupsContent_b1rrt_1",as="_sectionHeader_b1rrt_7",ns="_emptyCard_b1rrt_50",is="_emptyEmoji_b1rrt_60",cs="_emptyTitle_b1rrt_65",ms="_emptyDescription_b1rrt_72",us="_helperText_b1rrt_79",ls="_list_b1rrt_86",ds="_loadingWrapper_b1rrt_91",d={groupsContent:os,sectionHeader:as,emptyCard:ns,emptyEmoji:is,emptyTitle:cs,emptyDescription:ms,helperText:us,list:ls,loadingWrapper:ds};function z(){const s=Ae(),[r,i]=l.useState(!1),[a,o]=l.useState(null),[n,c]=l.useState(null),{data:h,isLoading:u,isError:g}=Ye(),{mutateAsync:N,isPending:Y}=Je(),{mutateAsync:J,isPending:X}=Ze(),{mutateAsync:Z,isPending:ee}=es({onSuccess:t=>{const m=E.find(fe=>fe.id===t)?.name??t;s(`/groups/${t}`,{state:{groupName:m}})}}),{mutateAsync:se,isPending:T}=ss(),{mutateAsync:te,isPending:re,data:oe,errorMessage:ae,clearErrorMessage:ne,resetSearchResult:O}=Xe(),ie=async t=>{try{await N(t),i(!1)}catch(m){console.error(m)}},E=h?.groups??[],P=E.filter(t=>t.is_invited),W=E.filter(t=>!t.is_invited),ce=W.length>0,me=(t,m)=>{o({id:t,name:m}),O()},ue=()=>{o(null),O()},le=(t,m)=>{c({id:t,name:m})},w=()=>{c(null)},de=async t=>{if(a)try{await te({groupId:a.id,email:t})}catch(m){console.error(m)}},pe=async t=>{if(a)try{await J({groupId:a.id,userId:t})}catch(m){console.error(m)}},he=async t=>{try{await Z({groupId:t})}catch(m){console.error(m)}},ge=async()=>{if(n)try{await se({groupId:n.id}),w()}catch(t){console.error(t)}},ye=()=>u?e.jsx("div",{className:d.loadingWrapper,children:e.jsx(Re,{size:"md",ariaLabel:"ã‚°ãƒ«ãƒ¼ãƒ—ã‚’èª­ã¿è¾¼ã¿ä¸­"})}):g?e.jsx("p",{className:d.helperText,children:"ã‚°ãƒ«ãƒ¼ãƒ—ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ"}):!ce&&P.length===0?e.jsxs("div",{className:d.emptyCard,children:[e.jsx("div",{className:d.emptyEmoji,"aria-hidden":"true",children:"ðŸ "}),e.jsx("p",{className:d.emptyTitle,children:"ã¾ã ã‚°ãƒ«ãƒ¼ãƒ—ãŒã‚ã‚Šã¾ã›ã‚“"}),e.jsxs("p",{className:d.emptyDescription,children:["å®¶æ—ã‚„å‹äººã¨ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œã£ã¦",e.jsx("br",{}),"å®¶äº‹ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ï¼"]})]}):e.jsxs("div",{className:d.list,children:[P.map(t=>e.jsx(Pe,{groupName:t.name,inviterName:void 0,disabled:ee||T,onAccept:()=>{he(t.id)},onDecline:()=>{le(t.id,t.name)}},`invite-${t.id}`)),W.map(t=>e.jsx(Oe,{name:t.name,memberCount:t.member_count,invitedCount:t.invited_count,onInviteClick:()=>{me(t.id,t.name)},onOpenClick:()=>{s(`/groups/${t.id}`,{state:{groupName:t.name}})}},t.id))]});return e.jsxs(q,{children:[e.jsxs("section",{className:d.groupsContent,"aria-labelledby":"groups-heading",children:[e.jsxs("div",{className:d.sectionHeader,children:[e.jsx("h2",{id:"groups-heading",children:"ã‚ãªãŸã®ã‚°ãƒ«ãƒ¼ãƒ—"}),e.jsx(G,{variant:"primary",radius:"pill",size:"md",fullWidth:!0,icon:e.jsx(Qe,{"aria-hidden":!0,size:18}),onClick:()=>{i(!0)},children:"æ–°è¦ä½œæˆ"})]}),ye(),e.jsx(qe,{open:r,onOpenChange:i,onSubmit:t=>{ie(t)},isSubmitting:Y})]}),e.jsx(We,{open:!!a,onOpenChange:t=>{t||ue()},groupName:a?.name??"ã‚°ãƒ«ãƒ¼ãƒ—å",onSearch:t=>{de(t)},isSearching:re,isInviting:X,searchResults:oe?.users??[],searchError:ae,onClearSearchError:ne,onInvite:t=>{pe(t.id)}}),e.jsx(H,{open:!!n,groupName:n?.name,onOpenChange:t=>{t||w()},onCancel:w,onConfirm:()=>{ge()},isSubmitting:T})]})}z.__docgenInfo={description:"",methods:[],displayName:"GroupsSection"};const ps="_profileContent_x0tmm_1",hs="_avatar_x0tmm_7",gs="_avatarIcon_x0tmm_18",ys="_avatarImage_x0tmm_25",fs="_profileText_x0tmm_32",vs="_welcome_x0tmm_38",_s="_userName_x0tmm_44",p={profileContent:ps,avatar:hs,avatarIcon:gs,avatarImage:ys,profileText:fs,welcome:vs,userName:_s};function B({user:s}){const r=s.name??"ãƒ¦ãƒ¼ã‚¶ãƒ¼";return e.jsx(q,{children:e.jsxs("div",{className:p.profileContent,children:[e.jsx("div",{className:p.avatar,children:s.image?e.jsx("img",{src:s.image,alt:`${r}ã®ã‚¢ã‚¤ã‚³ãƒ³`,className:p.avatarImage,referrerPolicy:"no-referrer"}):e.jsx($e,{"aria-hidden":!0,className:p.avatarIcon})}),e.jsxs("div",{className:p.profileText,children:[e.jsx("p",{className:p.welcome,children:"ã‚ˆã†ã“ãï¼"}),e.jsxs("p",{className:p.userName,children:[r," ã•ã‚“"]})]})]})})}B.__docgenInfo={description:"",methods:[],displayName:"ProfileSection",props:{user:{required:!0,tsType:{name:"AppSessionUser"},description:""}}};const xs="_heroContent_c7dgf_1",bs="_heroBadge_c7dgf_7",js="_heroEyebrow_c7dgf_18",Cs="_heroTitle_c7dgf_25",x={heroContent:xs,heroBadge:bs,heroEyebrow:js,heroTitle:Cs};function F(){return e.jsx(q,{children:e.jsxs("section",{className:x.heroContent,"aria-labelledby":"hero-heading",children:[e.jsx("div",{className:x.heroBadge,"aria-hidden":"true",children:e.jsx("img",{src:"https://kaji-ai.s3.ap-northeast-1.amazonaws.com/favicon.svg",alt:"ã‚¢ãƒ—ãƒªã®ã‚¢ã‚¤ã‚³ãƒ³"})}),e.jsxs("div",{children:[e.jsx("h1",{id:"hero-heading",className:x.heroTitle,children:"ã‚«ã‚¸ã‚¢ã‚¤"}),e.jsx("p",{className:x.heroEyebrow,children:"ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"})]})]})})}F.__docgenInfo={description:"",methods:[],displayName:"HeroSection"};function U(){const s=ze();return e.jsx("div",{className:k.page,children:e.jsxs("main",{className:k.shell,children:[e.jsx(F,{}),e.jsx(B,{user:s}),e.jsx(z,{}),e.jsx("p",{className:k.footerNote,children:"ã•ã‚ã€ä»Šé€±ã‚‚é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼ âœ¨"})]})})}U.__docgenInfo={description:"",methods:[],displayName:"UserPage"};const Ms={groups:[{id:"group-1",name:"æ°¸äº•å®¶",image:null,member_count:1,invited_count:0,is_invited:!1},{id:"group-2",name:"æµ…äº•å®¶",image:null,member_count:3,invited_count:1,is_invited:!1},{id:"group-3",name:"ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹æ¡œ",image:"https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?auto=format&fit=crop&w=200&h=200&q=80",member_count:5,invited_count:2,is_invited:!1}]},it={component:U,parameters:{layout:"fullscreen",msw:{handlers:[D.get(/\/api\/groups$/,()=>K.json(Ms))]}},argTypes:{user:{control:!1}},decorators:[(s,r)=>{const i=new ke({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return e.jsx(De,{initialEntries:["/users/mock-user"],children:e.jsx(Q,{value:r.args.user,children:e.jsx(Ge,{client:i,children:e.jsx(Ue,{children:e.jsx(s,{})})})})})}],render:()=>e.jsx(U,{})},V={id:"mock-user",name:"å±±ç”° èŠ±å­",email:"hanako@example.com",image:null},Ss={id:"mock-user-image",name:"å±±ç”° èŠ±å­",email:"hanako@example.com",image:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?auto=format&fit=facearea&w=200&h=200&q=80"},Is={id:"mock-user-large-image",name:"å±±ç”° å¤§è¼”",email:"daisuke@example.com",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&w=1200&h=1200&q=80"},Ns={id:"mock-user-small-image",name:"å±±ç”° å°æ˜¥",email:"koharu@example.com",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&w=60&h=60&q=80"},b={args:{user:V}},j={args:{user:Ss}},C={args:{user:Is}},M={args:{user:Ns}},S={args:{user:V},parameters:{msw:{handlers:[D.get(/\/api\/groups$/,()=>K.json({groups:[]}))]}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithoutImage
  }
}`,...b.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithImage
  }
}`,...j.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithLargeImage
  }
}`,...C.parameters?.docs?.source}}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithSmallImage
  }
}`,...M.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:`{
  args: {
    user: mockUserWithoutImage
  },
  parameters: {
    msw: {
      handlers: [http.get(/\\/api\\/groups$/, () => HttpResponse.json({
        groups: []
      }))]
    }
  }
}`,...S.parameters?.docs?.source}}};const ct=["WithoutImage","WithImage","WithLargeImage","WithSmallImage","NoGroups"];export{S as NoGroups,j as WithImage,C as WithLargeImage,M as WithSmallImage,b as WithoutImage,ct as __namedExportsOrder,it as default};
